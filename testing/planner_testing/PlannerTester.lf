target Cpp

public preamble {=
  #ifndef PLANNERTESTER
  #define PLANNERTESTER
  #include "common_vector.hpp"


  #endif //ROBOXARM
=}

reactor PlannerTester {
  input next_position_checked: Vector  // planner facing

  output planner_last_position: Vector
  output planner_current_position: Vector
  output planner_raw_instruction: Vector
  
  state current_last_position: Vector = {=Vector{-1,-1,0}=}
  state current_current_position: Vector = {=Vector{0,0,0}=}
  state current_raw_instruction: Vector = {=Vector{1,1,0}=}


  logical action next_input_arrived: Vector

  reaction(startup)-> planner_raw_instruction, planner_current_position, planner_last_position{=
    planner_raw_instruction.set(current_raw_instruction);
    planner_current_position.set(current_current_position);
    planner_last_position.set(current_last_position);
  =}

  reaction(next_input_arrived) -> planner_raw_instruction, planner_current_position, planner_last_position {=
    //state adaption
    current_last_position = current_current_position; 
    current_current_position = *next_input_arrived.get(); 
    //sending new commands
    planner_raw_instruction.set(current_raw_instruction);
    planner_current_position.set(current_current_position);
    planner_last_position.set(current_last_position);
    //debug print 
    std::cout << "This should print every Second" << std::endl;

  =}

  reaction(next_position_checked)-> next_input_arrived {= 
    next_input_arrived.schedule(next_position_checked.get(),100ms);
   =}

}
